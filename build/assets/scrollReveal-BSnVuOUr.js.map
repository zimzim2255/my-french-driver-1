{"version":3,"file":"scrollReveal-BSnVuOUr.js","sources":["../../src/utils/scrollReveal.ts"],"sourcesContent":["// Global Scroll Reveal with a luxury feel\n// - Adds 'lux-reveal' class to page content containers\n// - Observes elements to toggle 'is-visible' when in viewport\n\nexport function applyGlobalScrollReveal(root: HTMLElement) {\n  if (!root) return;\n  const selector = [\n    'main section',\n    'main article',\n    'main [class*=\"grid\"] > *',\n    'main [class*=\"card\"]',\n    'main [data-reveal]'\n  ].join(',');\n\n  const nodes = Array.from(root.querySelectorAll<HTMLElement>(selector));\n  const candidates = nodes.filter((el) => !el.closest('[data-no-reveal]') && !el.classList.contains('lux-reveal'));\n\n  // Skip elements that should not animate\n  const shouldSkip = (el: HTMLElement) => el.closest('[data-no-reveal]');\n\n  candidates.forEach((el, idx) => {\n    if (shouldSkip(el as HTMLElement)) return;\n    // Don't add if it's already configured\n    if (!el.classList.contains('lux-reveal')) {\n      el.classList.add('lux-reveal');\n      // Lighter stagger to reduce layout thrash\n      el.style.setProperty('--reveal-delay', `${(idx % 4) * 20}ms`);\n      // Elevate cards and sections slightly\n      if (/(card|section|panel|block|box)/i.test(el.className)) {\n        el.classList.add('lux-elevate');\n      }\n    }\n  });\n\n  const io = new IntersectionObserver(\n    (entries) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          const t = entry.target as HTMLElement;\n          t.classList.add('is-visible');\n          // Reveal once for performance\n          io.unobserve(t);\n        }\n      });\n    },\n    {\n      root: null,\n      rootMargin: '0px 0px -15% 0px',\n      threshold: 0.15,\n    }\n  );\n\n  if ('requestIdleCallback' in window) {\n    (window as any).requestIdleCallback(() => candidates.forEach((el) => io.observe(el)));\n  } else {\n    setTimeout(() => candidates.forEach((el) => io.observe(el)), 0);\n  }\n\n  // Return cleanup\n  return () => io.disconnect();\n}\n"],"names":["applyGlobalScrollReveal","root","selector","candidates","el","shouldSkip","idx","io","entries","entry","t"],"mappings":"AAIO,SAASA,EAAwBC,EAAmB,CACzD,GAAI,CAACA,EAAM,OACX,MAAMC,EAAW,CACf,eACA,eACA,2BACA,uBACA,oBAAA,EACA,KAAK,GAAG,EAGJC,EADQ,MAAM,KAAKF,EAAK,iBAA8BC,CAAQ,CAAC,EAC5C,OAAQE,GAAO,CAACA,EAAG,QAAQ,kBAAkB,GAAK,CAACA,EAAG,UAAU,SAAS,YAAY,CAAC,EAGzGC,EAAcD,GAAoBA,EAAG,QAAQ,kBAAkB,EAErED,EAAW,QAAQ,CAACC,EAAIE,IAAQ,CAC1BD,EAAWD,CAAiB,GAE3BA,EAAG,UAAU,SAAS,YAAY,IACrCA,EAAG,UAAU,IAAI,YAAY,EAE7BA,EAAG,MAAM,YAAY,iBAAkB,GAAIE,EAAM,EAAK,EAAE,IAAI,EAExD,kCAAkC,KAAKF,EAAG,SAAS,GACrDA,EAAG,UAAU,IAAI,aAAa,EAGpC,CAAC,EAED,MAAMG,EAAK,IAAI,qBACZC,GAAY,CACXA,EAAQ,QAASC,GAAU,CACzB,GAAIA,EAAM,eAAgB,CACxB,MAAMC,EAAID,EAAM,OAChBC,EAAE,UAAU,IAAI,YAAY,EAE5BH,EAAG,UAAUG,CAAC,CAChB,CACF,CAAC,CACH,EACA,CACE,KAAM,KACN,WAAY,mBACZ,UAAW,GAAA,CACb,EAGF,MAAI,wBAAyB,OAC1B,OAAe,oBAAoB,IAAMP,EAAW,QAASC,GAAOG,EAAG,QAAQH,CAAE,CAAC,CAAC,EAEpF,WAAW,IAAMD,EAAW,QAASC,GAAOG,EAAG,QAAQH,CAAE,CAAC,EAAG,CAAC,EAIzD,IAAMG,EAAG,WAAA,CAClB"}